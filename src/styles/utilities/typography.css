/* src/styles/utilities/typography.css */

/*******************************************************************************
 * TYPOGRAPHY SYSTEM - OPTIMIZED FOR TAILWIND
 *
 * A comprehensive typography system that works with Tailwind CSS and supports
 * dynamic font switching. Defines variables and utility classes for consistent
 * typography across the application.
 *******************************************************************************/

/*==============================================================================
 * CSS VARIABLES
 * Core typography variables used throughout the application
 *============================================================================*/

:root {
    /* System font stacks for fallbacks */
    --system-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --system-serif: Georgia, Cambria, "Times New Roman", Times, serif;
    --system-mono: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* Font families - will be overridden by FontContext */
    --font-heading: 'Fraunces', var(--system-serif);  /* Changed to Fraunces for Blueprint Editorial style */
    --font-body: 'Inter', var(--system-sans);
    --font-code: 'JetBrains Mono', var(--system-mono);

    /* Line heights */
    --line-height-tight: 1.2;
    --line-height-normal: 1.6;
    --line-height-code: 1.5;

    /* Letter spacing */
    --letter-spacing-heading: -0.01em;
    --letter-spacing-body: 0.025em;
    --letter-spacing-code: 0;

    /* Word spacing - NEW */
    --word-spacing-tight: -0.025em;
    --word-spacing-normal: 0.025em;
    --word-spacing-wide: 0.05em;
    --word-spacing-wider: 0.1em;

    /* Default word spacing for different text types - NEW */
    --word-spacing-heading: var(--word-spacing-normal);
    --word-spacing-body: var(--word-spacing-normal);
    --word-spacing-code: var(--word-spacing-normal);

    /* Font features */
    --font-feature-settings-heading: 'kern', 'liga', 'calt', 'pnum';
    --font-feature-settings-body: 'kern', 'liga', 'calt', 'onum';
    --font-feature-settings-code: 'kern', 'zero';

    /* Type scale - use Tailwind's scale instead */
    --font-scale-ratio: 1.2;
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 1rem;
    --text-lg: calc(var(--text-base) * var(--font-scale-ratio));
    --text-xl: calc(var(--text-lg) * var(--font-scale-ratio));
    --text-2xl: calc(var(--text-xl) * var(--font-scale-ratio));
    --text-3xl: calc(var(--text-2xl) * var(--font-scale-ratio));
    --text-4xl: calc(var(--text-3xl) * var(--font-scale-ratio));
    --text-5xl: calc(var(--text-4xl) * var(--font-scale-ratio));
    --text-6xl: calc(var(--text-5xl) * var(--font-scale-ratio));

    /* Font weights */
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-extrabold: 800;
}

/* Move typography styles to Tailwind layers */
@layer base {
    /* Base text styles for better spacing - NEW */
    html, body {
        word-spacing: var(--word-spacing-body);
        word-break: normal;
        overflow-wrap: break-word;
    }

    /* Ensure inline elements preserve spaces - NEW */
    span, a, em, strong, code {
        white-space: normal;
    }

    /* Base heading styles */
    h1, .h1 {
        @apply text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight text-heading mb-6;
        font-family: var(--font-heading);
        font-feature-settings: var(--font-feature-settings-heading);
        letter-spacing: var(--letter-spacing-heading);
        word-spacing: var(--word-spacing-heading); /* NEW */
    }

    h2, .h2 {
        @apply text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight text-heading mb-5;
        font-family: var(--font-heading);
        font-feature-settings: var(--font-feature-settings-heading);
        letter-spacing: var(--letter-spacing-heading);
        word-spacing: var(--word-spacing-heading); /* NEW */
    }

    h3, .h3 {
        @apply text-2xl sm:text-3xl lg:text-4xl font-semibold tracking-tight text-heading mb-4;
        font-family: var(--font-heading);
        font-feature-settings: var(--font-feature-settings-heading);
        letter-spacing: var(--letter-spacing-heading);
        word-spacing: var(--word-spacing-heading); /* NEW */
    }

    h4, .h4 {
        @apply text-xl sm:text-2xl font-semibold tracking-tight text-heading mb-3;
        font-family: var(--font-heading);
        font-feature-settings: var(--font-feature-settings-heading);
        letter-spacing: var(--letter-spacing-heading);
        word-spacing: var(--word-spacing-heading); /* NEW */
    }

    h5, .h5 {
        @apply text-lg sm:text-xl font-semibold tracking-tight text-heading mb-2;
        font-family: var(--font-heading);
        font-feature-settings: var(--font-feature-settings-heading);
        letter-spacing: var(--letter-spacing-heading);
        word-spacing: var(--word-spacing-heading); /* NEW */
    }

    h6, .h6 {
        @apply text-base sm:text-lg font-semibold tracking-tight text-heading mb-2;
        font-family: var(--font-heading);
        font-feature-settings: var(--font-feature-settings-heading);
        letter-spacing: var(--letter-spacing-heading);
        word-spacing: var(--word-spacing-heading); /* NEW */
    }

    /* Paragraph styles - NEW */
    p {
        @apply mb-4 leading-relaxed;
        font-family: var(--font-body);
        font-feature-settings: var(--font-feature-settings-body);
        letter-spacing: var(--letter-spacing-body);
        word-spacing: var(--word-spacing-body);
        word-break: normal;
        overflow-wrap: break-word;
    }
}

/* Keep the font variant system */
/*==============================================================================
 * FONT SYSTEM VARIANTS
 * CSS selectors for the different font systems
 *============================================================================*/

/* Modern (default) */
[data-font="modern"] {
    --font-heading: 'Montserrat', var(--system-sans);
    --font-body: 'Inter', var(--system-sans);
    --font-code: 'JetBrains Mono', var(--system-mono);
    --word-spacing-heading: var(--word-spacing-normal); /* NEW */
    --word-spacing-body: var(--word-spacing-normal); /* NEW */
}

/* Elegant */
[data-font="elegant"] {
    --font-heading: 'Playfair Display', var(--system-serif);
    --font-body: 'Lato', var(--system-sans);
    --font-code: 'Fira Code', var(--system-mono);
    --word-spacing-heading: var(--word-spacing-normal); /* NEW */
    --word-spacing-body: var(--word-spacing-normal); /* NEW */
}

/* Technical */
[data-font="technical"] {
    --font-heading: 'Roboto', var(--system-sans);
    --font-body: 'Source Sans Pro', var(--system-sans);
    --font-code: 'Inconsolata', var(--system-mono);
    --word-spacing-heading: var(--word-spacing-normal); /* NEW */
    --word-spacing-body: var(--word-spacing-normal); /* NEW */
}

/* Editorial - Blueprint Editorial style */
[data-font="editorial"] {
    --font-heading: 'Fraunces', var(--system-serif);
    --font-body: 'Libre Franklin', var(--system-sans);
    --font-code: 'IBM Plex Mono', var(--system-mono);
    --word-spacing-heading: var(--word-spacing-wide); /* NEW - increased for Fraunces */
    --word-spacing-body: var(--word-spacing-normal); /* NEW */
}

/* Neo Geometric */
[data-font="neo-geometric"] {
    --font-heading: 'Space Grotesk', var(--system-sans);
    --font-body: 'DM Sans', var(--system-sans);
    --font-code: 'Recursive Mono', var(--system-mono);
    --word-spacing-heading: var(--word-spacing-normal); /* NEW */
    --word-spacing-body: var(--word-spacing-normal); /* NEW */
}

/* Cybervoid */
[data-font="cybervoid"] {
    --font-heading: 'Rajdhani', var(--system-sans);
    --font-body: 'Quantico', var(--system-sans);
    --font-code: 'VT323', var(--system-mono);
    --word-spacing-heading: var(--word-spacing-wide); /* NEW - increased for better readability */
    --word-spacing-body: var(--word-spacing-wide); /* NEW - increased for better readability */
}

/* System */
[data-font="system"] {
    --font-heading: var(--system-sans);
    --font-body: var(--system-sans);
    --font-code: var(--system-mono);
    --word-spacing-heading: var(--word-spacing-normal); /* NEW */
    --word-spacing-body: var(--word-spacing-normal); /* NEW */
}

/* Keep only the essential utility classes from the original file */
@layer utilities {
    /* Font families */
    .font-heading {
        font-family: var(--font-heading);
        font-feature-settings: var(--font-feature-settings-heading);
        letter-spacing: var(--letter-spacing-heading);
        word-spacing: var(--word-spacing-heading); /* NEW */
    }

    .font-body {
        font-family: var(--font-body);
        font-feature-settings: var(--font-feature-settings-body);
        letter-spacing: var(--letter-spacing-body);
        word-spacing: var(--word-spacing-body); /* NEW */
    }

    .font-code {
        font-family: var(--font-code);
        font-feature-settings: var(--font-feature-settings-code);
        letter-spacing: var(--letter-spacing-code);
        word-spacing: var(--word-spacing-code); /* NEW */
    }

    /* Font loading optimization */
    .font-optimization {
        font-display: swap;
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* NEW - Word spacing utility classes */
    .word-spacing-tight {
        word-spacing: var(--word-spacing-tight);
    }

    .word-spacing-normal {
        word-spacing: var(--word-spacing-normal);
    }

    .word-spacing-wide {
        word-spacing: var(--word-spacing-wide);
    }

    .word-spacing-wider {
        word-spacing: var(--word-spacing-wider);
    }

    /* NEW - Text spacing safeguards */
    .preserve-whitespace {
        white-space: pre-wrap;
        word-break: normal;
        overflow-wrap: break-word;
    }

    .text-readable {
        letter-spacing: var(--letter-spacing-body);
        word-spacing: var(--word-spacing-wide);
        line-height: var(--line-height-normal);
    }

    /* Rich text styling */
    .rich-text strong {
        font-weight: 600;
    }

    .rich-text em {
        font-style: italic;
    }

    .rich-text .text-emphasis {
        font-weight: 600;
        letter-spacing: 0.02em;
    }

    .rich-text .text-code {
        font-family: monospace;
        background-color: var(--color-bg-tertiary);
        padding: 0.1em 0.3em;
        border-radius: 3px;
    }

    .rich-text .accent-secondary {
        color: var(--color-accent-secondary);
    }

    .rich-text .accent-warm {
        color: var(--color-accent-warm);
    }

    .rich-text .accent-contrast {
        color: var(--color-accent-contrast);
    }

    .rich-text .underline-accent {
        text-decoration: underline;
        text-decoration-color: var(--color-accent-secondary);
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
    }

    .rich-text .underline-warm {
        text-decoration: underline;
        text-decoration-color: var(--color-accent-warm);
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
    }
}